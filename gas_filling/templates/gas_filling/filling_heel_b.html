{% extends "base.html" %}
{% block content %}

<h1>Gas Filling</h1>

<h2>Order Line {{ order_line.line_number }}</h2>
<h2>Filling: {{ fill_progress }}</h2>
<ul>
    <li><strong>Product:</strong> {{ order_line.product }}</li>
    <li><strong>Cylinder Size:</strong> {{ order_line.cylinder_size }}</li>
    <li><strong>Target Fill Weight:</strong> {{ order_line.fill_weight }}</li>
</ul>

<h2>Step 3a: Weight After Heel Removed</h2>

{% if order_line.cylinder_type != "STILLAGE" %}
{% if cylinder.tare %}
<p><strong>Expected Tare Weight:</strong> {{ cylinder.tare }} kg</p>
{% else %}
<p>No tare weight recorded for this cylinder.</p>
{% endif %}
{% endif %}

{% if error_message %}
<p> {{ error_message }} </p>
{% endif %}

<form method="post">
    {% csrf_token %}
    <label for="tare_weight">Weight with Heel(kg):</label>
    <input type="number" step="0.01" name="heel_weight" required autofocus>
    <button type="submit" class="btn-primary">Next</button>
</form>

<form action="{% url 'gas_filling:order_show' filling.order_line.order.id %}" method="get" style="margin-top: 20px;">
    <button type="submit" class="btn-primary" style="margin-top:20px;">Cancel</button>
</form>

{% include "gas_filling/abandon.html" %}

{% endblock %}
